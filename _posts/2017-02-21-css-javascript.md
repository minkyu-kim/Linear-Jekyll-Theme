---
title: Spring과 리팩토링 사이의 단비같은 UI
featured: images/CSS-JavaScript.jpg
layout: post
---

# 노력 대비 가성비는 역시 UI 아니겠습니까? - 마우스 포인터로 장난치기

## 0. 마우스 포인터를 이쁘게 바꿔보자
 처음 신입 개발 프로젝트를 시작하면서 기획했던 내용중에, UI 관련 계획이 하나 있었다. 페이지 전체에 커어어어다란 병맛같은 마우스 포인터를 사용하여, 우리 서비스의 아이덴티티를 확립하자는 것.....ㅎㅎ...
 물론 이 소박한 꿈은 촉박한 개발 일정에 밀려서 조금씩 잊혀지고 있었다. 그러던 중 이어지는 코드 리뷰와 리팩토링 작업에 지쳐 잠시 활력소를 찾다가, 잠깐 머리도 식히고 쉬어갈겸해서 크고 아름다운 마우스 포인터를 만들어보는 개인 Task를 세웠다.

## 1. 일단 바꾸기라도 해보자
크고 아름다운 마우스 포인터를 만들기 위해서는 일단 포인터를 어떻게 바꾸는지 아는 것이 가장 먼저인듯 해서, CSS를 이용해서 마우스 포인터를 바꾸는 방법을 찾았다.

```css
* {
    cursor: url('http://pickle.nhnent.com/resources/pickleImage.cur') 10 10, auto;
}
```

특정 태그가 아닌, 페이지 전체에 걸쳐 마우스 포인터를 적용하고 싶기 때문에 `*`을 사용해서 CSS를 적용하였다. http://~ 의 위치에 있는 이미지를 대체 마우스 포인터로 사용하며, 실제 클릭하는 지점과 이미지 좌측상단과의 offset은 x,y 각각 10을 설정한다는 CSS이다. 404에러 등의 문제로 이미지를 가져오지 못하는 경우에는 auto 설정을 이용하여 기본 설정된 마우스 포인터를 사용하도록 하였다.

서비스 페이지 전체에 걸쳐 마우스 포인터를 적용하고 싶다면 모든 페이지의 CSS에 위의 코드를 삽입하면 되지만, 모든 View에 include되는 헤더 View가 있어서 이곳의 CSS 한군데에만 코드를 넣었다.

## 2. 문제점
위의 cursor 속성을 이용하는 방식은 큰 문제점이 있다. 10펙셀 단위로 이미지를 줄여보는 노가다를 해본 결과, 가로 또는 세로가 100픽셀 이상 되는 이미지의 url을 입력하면 포인터가 제대로 바뀌지 않는다. 즉, 위의 코드의 경우에는 auto로 넘어가버린다. 이래서는 우리 팀이 원하는 `커어어다랗고 개성있는` 마우스 포인터를 구현할수가 없다. 단순히 CSS만 이용하는것 말고, 다른 대책이 필요하다.

## 3. JQuery를 조금 섞어보자
이대로 100픽셀 이상의 마우스 포인터를 사용하는것을 포기해야하나 좌절하고 있던 중, JQuery에서 지원하는 mousemove 이벤트를 사용하면 어떨까하는 생각이 들었다.

우선 헤더 View의 jsp에 cursor라는 ClassName을 가진 img를 하나 추가한다. 그리고 스크립트가 로드되기 전에, 이상한 위치에 마우스 포인터가 생길 것을 우려하여 다음과 같이 CSS를 정의해주었다.

```css
.cursor {
    position: absolute;
    top: -2000px;
    left: -2000px;
}
```

그리고 헤더 View의 js파일에 다음과 같은 코드를 추가한다.

```javascript
'use strict';
(function($) {
    $(document).ready(() => {
        $(document).mousemove(function(e) {
            $('.cursor').css('top',e.pageY-10);
            $('.cursor').css('left',e.pageX-10);
            $('.cursor').css('z-index',99999);      
        });
    });
})(jQuery);
```
크롬 브라우저 기준으로(아마 IE 역시 동일했던 걸로 기억한다) e.pageX/Y는 document 상에서의 현재 마우스 포인터 위치 좌표값을 나타낸다. mousemove 이벤트가 발생할때마다 마우스 포인터로 사용하고싶은 이미지가 담긴 img의 CSS를 이렇게 바꿔주면 그 크기에 상관없이 원하는 이미지가 마우스 커서를 따라서 움직이게 할 수 있다. 마우스 포인터는 화면의 가장 위에 위치해야하므로, z-index의 값을 99999로 설정하여 다른 레이어에 마우스 포인터가 가려지는 불상사를 방지했다.

위의 코드에서는 1번에서와 마찬가지로, 이미지의 offset 조정을 위해 이미지의 위치를 x,y 각각 -10만큼 이동시켰다. 각자 사용하고싶은 이미지의 모양에 따라 offset 조절을 통해 자연스러운 클릭을 유도할 수 있을것이다.

## 4. 다듬기
이까지 적용하고나서 새로고침을 해본 순간, 아차 하는 생각과 함께 '이 방법은 아닌가, 새로운 방법으로 처음부터 다시 해봐야하나' 등 온갖 생각이 들기 시작했다. z-index 값을 99999로 설정했고, img의 좌표 offset을 각각 10만큼 위로 왼쪽으로 이동했기 때문에 아무것도 클릭할 수 없는 상황이 되어버린 것이다.

내가 마우스 포인터를 어디로 가져가든, 모든 레이어의 위에 마우스 포인터 이미지가 위치하기 때문에 onClickEvent도 없는 애꿎은 이미지만 꾹꾹 누르게되고 결국 아무일도 벌어지지 않는 불상사가 일어났다.

이를 해결하기 위해 약간의 검색을 해본 결과, 킹갓CSS를 통해 이를 해결할 수 있는 방법을 찾았다.

```css
.cursor {
    pointer-events: none;
    position: absolute;
    top: -2000px;
    left: -2000px;
}
```
맨 위에 추가된 pointer-events 속성을 none으로 바꾸어주면 이제 이 이미지는 더이상 마우스 이벤트의 대상이 되지 않는다. 즉, 이미지를 뚫고 그 아래의 레이어를 클릭할 수 있는 것이다.

끝으로, 아래의 CSS를 추가하여 포인터 이미지 위를 가리고있는 원래 마우스 포인터를 없애주면 원하던 기능이 최종적으로 완성된다.

```css
* {
    cursor: none;
}
```

## 5. 마무리
생각보다 무척 짧은 시간을 들여서 눈에 가장 먼저 들어올 수 있는 UI 요소를 꾸밀 수 있다는 것은 꽤나 가성비가 좋은 일이라고 생각한다. 이제 다시 코드리뷰와 리팩토링, 서버 및 DB 스케일링으로 돌아가야겠지만, 오랜만에 아기자기하게 UI를 꾸며보면서 마치 꽃꽂이나 십자수를 하는 듯한 힐링을 할 수 있었다.

이런걸 하면서 이런 느낌을 받는게 슬픈건 기분탓이다.
고양이가 그랬다.
